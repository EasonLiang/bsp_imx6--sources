From 83f44da23305ab563454e6fd7e9f83e09508a227 Mon Sep 17 00:00:00 2001
From: Samuli Piippo <samuli.piippo@qt.io>
Date: Tue, 9 Jun 2020 10:15:07 +0300
Subject: [PATCH] QSGRhiShaderEffectNode is available only with opengl

Fixes build without opengl

Change-Id: Ica5752c21567b730065ec6276a9016b3989f9d02
---
 src/quick/items/qquickrendercontrol.cpp | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/quick/items/qquickrendercontrol.cpp b/src/quick/items/qquickrendercontrol.cpp
index f8d2d14fcb..972c4ce279 100644
--- a/src/quick/items/qquickrendercontrol.cpp
+++ b/src/quick/items/qquickrendercontrol.cpp
@@ -200,8 +200,8 @@ void QQuickRenderControlPrivate::windowDestroyed()
         rc->invalidate();
 
         QQuickWindowPrivate::get(window)->animationController.reset();
-#if QT_CONFIG(quick_shadereffect)
-    QSGRhiShaderEffectNode::cleanupMaterialTypeCache();
+#if QT_CONFIG(quick_shadereffect) && QT_CONFIG(opengl)
+        QSGRhiShaderEffectNode::cleanupMaterialTypeCache();
 #endif
         window = nullptr;
     }
-- 
2.25.1


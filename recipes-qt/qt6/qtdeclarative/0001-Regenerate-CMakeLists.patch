From 07374265dc823ee685391574343ef904ca715c4d Mon Sep 17 00:00:00 2001
From: Samuli Piippo <samuli.piippo@qt.io>
Date: Mon, 1 Jun 2020 16:42:25 +0300
Subject: [PATCH] Regenerate CMakeLists

Change-Id: I8f4ee233cffa32766c434f0e7240e58fe028f153
---
 src/qmltyperegistrar/.prev_CMakeLists.txt   |  3 ++-
 src/qmltyperegistrar/CMakeLists.txt         |  3 ++-
 tools/qml/.prev_CMakeLists.txt              | 16 +++++++++-------
 tools/qml/CMakeLists.txt                    | 17 +++++++++--------
 tools/qmlcachegen/.prev_CMakeLists.txt      |  3 ++-
 tools/qmlcachegen/CMakeLists.txt            |  3 ++-
 tools/qmlformat/.prev_CMakeLists.txt        |  3 ++-
 tools/qmlformat/CMakeLists.txt              |  3 ++-
 tools/qmlimportscanner/.prev_CMakeLists.txt |  3 ++-
 tools/qmlimportscanner/CMakeLists.txt       |  3 ++-
 tools/qmljs/.prev_CMakeLists.txt            | 19 ++++++++++---------
 tools/qmljs/CMakeLists.txt                  | 19 ++++++++++---------
 tools/qmllint/.prev_CMakeLists.txt          |  3 ++-
 tools/qmllint/CMakeLists.txt                |  3 ++-
 tools/qmlplugindump/.prev_CMakeLists.txt    |  7 ++++---
 tools/qmlplugindump/CMakeLists.txt          |  7 ++++---
 tools/qmlpreview/.prev_CMakeLists.txt       |  3 ++-
 tools/qmlpreview/CMakeLists.txt             |  3 ++-
 tools/qmlprofiler/.prev_CMakeLists.txt      |  3 ++-
 tools/qmlprofiler/CMakeLists.txt            |  3 ++-
 tools/qmlscene/.prev_CMakeLists.txt         |  7 ++++---
 tools/qmlscene/CMakeLists.txt               |  7 ++++---
 tools/qmltestrunner/.prev_CMakeLists.txt    |  3 ++-
 tools/qmltestrunner/CMakeLists.txt          |  3 ++-
 tools/qmltime/CMakeLists.txt                |  1 +
 25 files changed, 87 insertions(+), 61 deletions(-)

diff --git a/src/qmltyperegistrar/.prev_CMakeLists.txt b/src/qmltyperegistrar/.prev_CMakeLists.txt
index 5809054824..365aa30e40 100644
--- a/src/qmltyperegistrar/.prev_CMakeLists.txt
+++ b/src/qmltyperegistrar/.prev_CMakeLists.txt
@@ -4,7 +4,8 @@
 ## qmltyperegistrar Tool:
 #####################################################################
 
-qt_add_tool(qmltyperegistrar
+qt_get_tool_target_name(target_name qmltyperegistrar)
+qt_add_tool(${target_name}
     TARGET_DESCRIPTION "QML Types Registrar"
     SOURCES
         ../../tools/shared/qmlstreamwriter.cpp ../../tools/shared/qmlstreamwriter.h
diff --git a/src/qmltyperegistrar/CMakeLists.txt b/src/qmltyperegistrar/CMakeLists.txt
index f7f68bf3dd..ad603e897c 100644
--- a/src/qmltyperegistrar/CMakeLists.txt
+++ b/src/qmltyperegistrar/CMakeLists.txt
@@ -4,7 +4,8 @@
 ## qmltyperegistrar Tool:
 #####################################################################
 
-qt_add_tool(qmltyperegistrar
+qt_get_tool_target_name(target_name qmltyperegistrar)
+qt_add_tool(${target_name}
     TARGET_DESCRIPTION "QML Types Registrar"
     TOOLS_TARGET Qml # special case
     SOURCES
diff --git a/tools/qml/.prev_CMakeLists.txt b/tools/qml/.prev_CMakeLists.txt
index 0c291d5292..a247b4bb4e 100644
--- a/tools/qml/.prev_CMakeLists.txt
+++ b/tools/qml/.prev_CMakeLists.txt
@@ -4,7 +4,8 @@
 ## qml Tool:
 #####################################################################
 
-qt_add_tool(qml
+qt_get_tool_target_name(target_name qml)
+qt_add_tool(${target_name}
     TARGET_DESCRIPTION "QML Runtime"
     SOURCES
         conf.h
@@ -23,7 +24,7 @@ set(qml_resource_files
     "resources/qml-64.png"
 )
 
-qt_add_resource(qml "qml"
+qt_add_resource(${target_name} "qml"
     PREFIX
         "/qt-project.org/QmlRuntime"
     FILES
@@ -40,12 +41,12 @@ qt_add_resource(qml "qml"
 ## Scopes:
 #####################################################################
 
-qt_extend_target(qml CONDITION TARGET Qt::Gui
+qt_extend_target(${target_name} CONDITION TARGET Qt::Gui
     PUBLIC_LIBRARIES
         Qt::Gui
 )
 
-qt_extend_target(qml CONDITION TARGET Qt::Widgets
+qt_extend_target(${target_name} CONDITION TARGET Qt::Widgets
     PUBLIC_LIBRARIES
         Qt::Widgets
 )
@@ -58,14 +59,15 @@ qt_extend_target(qml CONDITION TARGET Qt::Widgets
 # OTHER_FILES = "resources/Info.plist"
 # QMAKE_INFO_PLIST = "resources/Info.plist"
 
-qt_extend_target(qml CONDITION QT_FEATURE_qml_debug
+qt_extend_target(${target_name} CONDITION QT_FEATURE_qml_debug
     DEFINES
         QT_QML_DEBUG_NO_WARNING
 )
 
-set_target_properties(qml PROPERTIES
+set_target_properties(${target_name} PROPERTIES
+    QT_QML_MODULE_INSTALL_QMLTYPES TRUE
     QT_QML_MODULE_VERSION 1.0
     QT_QML_MODULE_URI QmlRuntime.Config
 )
 
-qt6_qml_type_registration(qml)
+qt6_qml_type_registration(${target_name})
diff --git a/tools/qml/CMakeLists.txt b/tools/qml/CMakeLists.txt
index d4f803ff04..839c8b1516 100644
--- a/tools/qml/CMakeLists.txt
+++ b/tools/qml/CMakeLists.txt
@@ -4,7 +4,8 @@
 ## qml Tool:
 #####################################################################
 
-qt_add_tool(qml
+qt_get_tool_target_name(target_name qml)
+qt_add_tool(${target_name}
     TARGET_DESCRIPTION "QML Runtime"
     TOOLS_TARGET Qml # special case
     SOURCES
@@ -40,7 +41,7 @@ set(qml_resource_files
     "resources/qml-64.png"
 )
 
-qt_add_resource(qml "qml"
+qt_add_resource(${target_name} "qml"
     PREFIX
         "/qt-project.org/QmlRuntime"
     FILES
@@ -57,12 +58,12 @@ qt_add_resource(qml "qml"
 ## Scopes:
 #####################################################################
 
-qt_extend_target(qml CONDITION TARGET Qt::Gui
+qt_extend_target(${target_name} CONDITION TARGET Qt::Gui
     PUBLIC_LIBRARIES
         Qt::Gui
 )
 
-qt_extend_target(qml CONDITION TARGET Qt::Widgets
+qt_extend_target(${target_name} CONDITION TARGET Qt::Widgets
     PUBLIC_LIBRARIES
         Qt::Widgets
 )
@@ -75,14 +76,14 @@ qt_extend_target(qml CONDITION TARGET Qt::Widgets
 # OTHER_FILES = "resources/Info.plist"
 # QMAKE_INFO_PLIST = "resources/Info.plist"
 
-qt_extend_target(qml CONDITION QT_FEATURE_qml_debug
+qt_extend_target(${target_name} CONDITION QT_FEATURE_qml_debug
     DEFINES
         QT_QML_DEBUG_NO_WARNING
 )
 
-set_target_properties(qml PROPERTIES
+set_target_properties(${target_name} PROPERTIES
+    QT_QML_MODULE_INSTALL_QMLTYPES TRUE
     QT_QML_MODULE_VERSION 1.0
     QT_QML_MODULE_URI QmlRuntime.Config
 )
-qt6_qml_type_registration(qml)
-
+qt6_qml_type_registration(${target_name})
diff --git a/tools/qmlcachegen/.prev_CMakeLists.txt b/tools/qmlcachegen/.prev_CMakeLists.txt
index afae63737a..6580f3ee83 100644
--- a/tools/qmlcachegen/.prev_CMakeLists.txt
+++ b/tools/qmlcachegen/.prev_CMakeLists.txt
@@ -4,7 +4,8 @@
 ## qmlcachegen Tool:
 #####################################################################
 
-qt_add_tool(qmlcachegen
+qt_get_tool_target_name(target_name qmlcachegen)
+qt_add_tool(${target_name}
     TARGET_DESCRIPTION "QML Cache Generator"
     SOURCES
         ../shared/resourcefilemapper.cpp ../shared/resourcefilemapper.h
diff --git a/tools/qmlcachegen/CMakeLists.txt b/tools/qmlcachegen/CMakeLists.txt
index d2c109d002..f991b52271 100644
--- a/tools/qmlcachegen/CMakeLists.txt
+++ b/tools/qmlcachegen/CMakeLists.txt
@@ -4,7 +4,8 @@
 ## qmlcachegen Tool:
 #####################################################################
 
-qt_add_tool(qmlcachegen
+qt_get_tool_target_name(target_name qmlcachegen)
+qt_add_tool(${target_name}
     TARGET_DESCRIPTION "QML Cache Generator"
     TOOLS_TARGET Qml # special case
     SOURCES
diff --git a/tools/qmlformat/.prev_CMakeLists.txt b/tools/qmlformat/.prev_CMakeLists.txt
index 940e68d9d0..e99eca96e1 100644
--- a/tools/qmlformat/.prev_CMakeLists.txt
+++ b/tools/qmlformat/.prev_CMakeLists.txt
@@ -4,7 +4,8 @@
 ## qmlformat Tool:
 #####################################################################
 
-qt_add_tool(qmlformat
+qt_get_tool_target_name(target_name qmlformat)
+qt_add_tool(${target_name}
     TARGET_DESCRIPTION "QML Formatter"
     SOURCES
         commentastvisitor.cpp commentastvisitor.h
diff --git a/tools/qmlformat/CMakeLists.txt b/tools/qmlformat/CMakeLists.txt
index bfafe972ef..73d106a1c1 100644
--- a/tools/qmlformat/CMakeLists.txt
+++ b/tools/qmlformat/CMakeLists.txt
@@ -4,7 +4,8 @@
 ## qmlformat Tool:
 #####################################################################
 
-qt_add_tool(qmlformat
+qt_get_tool_target_name(target_name qmlformat)
+qt_add_tool(${target_name}
     TARGET_DESCRIPTION "QML Formatter"
     TOOLS_TARGET Qml # special case
     SOURCES
diff --git a/tools/qmlimportscanner/.prev_CMakeLists.txt b/tools/qmlimportscanner/.prev_CMakeLists.txt
index 0ff1581279..2d589acf24 100644
--- a/tools/qmlimportscanner/.prev_CMakeLists.txt
+++ b/tools/qmlimportscanner/.prev_CMakeLists.txt
@@ -4,7 +4,8 @@
 ## qmlimportscanner Tool:
 #####################################################################
 
-qt_add_tool(qmlimportscanner
+qt_get_tool_target_name(target_name qmlimportscanner)
+qt_add_tool(${target_name}
     TARGET_DESCRIPTION "QML Import Scanner"
     SOURCES
         ../shared/resourcefilemapper.cpp ../shared/resourcefilemapper.h
diff --git a/tools/qmlimportscanner/CMakeLists.txt b/tools/qmlimportscanner/CMakeLists.txt
index 068b9c3078..dfe24cfc26 100644
--- a/tools/qmlimportscanner/CMakeLists.txt
+++ b/tools/qmlimportscanner/CMakeLists.txt
@@ -4,7 +4,8 @@
 ## qmlimportscanner Tool:
 #####################################################################
 
-qt_add_tool(qmlimportscanner
+qt_get_tool_target_name(target_name qmlimportscanner)
+qt_add_tool(${target_name}
     TARGET_DESCRIPTION "QML Import Scanner"
     TOOLS_TARGET Qml # special case
     SOURCES
diff --git a/tools/qmljs/.prev_CMakeLists.txt b/tools/qmljs/.prev_CMakeLists.txt
index 3bbec9b02a..621f54a18b 100644
--- a/tools/qmljs/.prev_CMakeLists.txt
+++ b/tools/qmljs/.prev_CMakeLists.txt
@@ -4,7 +4,8 @@
 ## qmljs Tool:
 #####################################################################
 
-qt_add_tool(qmljs
+qt_get_tool_target_name(target_name qmljs)
+qt_add_tool(${target_name}
     TARGET_DESCRIPTION "QML JavaScript Tool"
     SOURCES
         qmljs.cpp
@@ -44,42 +45,42 @@ qt_add_tool(qmljs
 ## Scopes:
 #####################################################################
 
-qt_extend_target(qmljs CONDITION WIN32
+qt_extend_target(${target_name} CONDITION WIN32
     DEFINES
         NOMINMAX
 )
 
-qt_extend_target(qmljs CONDITION disassembler AND ((TEST_architecture_arch STREQUAL "i386") OR (TEST_architecture_arch STREQUAL "x86_64"))
+qt_extend_target(${target_name} CONDITION disassembler AND ((TEST_architecture_arch STREQUAL "i386") OR (TEST_architecture_arch STREQUAL "x86_64"))
     DEFINES
         WTF_USE_UDIS86=1
 )
 
-qt_extend_target(qmljs CONDITION (TEST_architecture_arch STREQUAL "arm") AND disassembler
+qt_extend_target(${target_name} CONDITION (TEST_architecture_arch STREQUAL "arm") AND disassembler
     DEFINES
         WTF_USE_ARMV7_DISASSEMBLER=1
 )
 
-qt_extend_target(qmljs CONDITION (TEST_architecture_arch STREQUAL "arm64") AND disassembler
+qt_extend_target(${target_name} CONDITION (TEST_architecture_arch STREQUAL "arm64") AND disassembler
     DEFINES
         WTF_USE_ARM64_DISASSEMBLER=1
 )
 
-qt_extend_target(qmljs CONDITION (TEST_architecture_arch STREQUAL "mips") AND disassembler
+qt_extend_target(${target_name} CONDITION (TEST_architecture_arch STREQUAL "mips") AND disassembler
     DEFINES
         WTF_USE_MIPS32_DISASSEMBLER=1
 )
 
-qt_extend_target(qmljs CONDITION NOT disassembler
+qt_extend_target(${target_name} CONDITION NOT disassembler
     DEFINES
         WTF_USE_UDIS86=0
 )
 
-qt_extend_target(qmljs CONDITION CMAKE_BUILD_TYPE STREQUAL Release
+qt_extend_target(${target_name} CONDITION CMAKE_BUILD_TYPE STREQUAL Release
     DEFINES
         NDEBUG
 )
 
-qt_extend_target(qmljs CONDITION GCC AND QT_COMPILER_VERSION_MAJOR STRGREATER 6 AND NOT CLANG AND NOT ICC
+qt_extend_target(${target_name} CONDITION GCC AND QT_COMPILER_VERSION_MAJOR STRGREATER 6 AND NOT CLANG AND NOT ICC
     COMPILE_OPTIONS
         -Wno-expansion-to-defined
 )
diff --git a/tools/qmljs/CMakeLists.txt b/tools/qmljs/CMakeLists.txt
index 257f5fdb6e..e4e2cf1b7a 100644
--- a/tools/qmljs/CMakeLists.txt
+++ b/tools/qmljs/CMakeLists.txt
@@ -4,7 +4,8 @@
 ## qmljs Tool:
 #####################################################################
 
-qt_add_tool(qmljs
+qt_get_tool_target_name(target_name qmljs)
+qt_add_tool(${target_name}
     TARGET_DESCRIPTION "QML JavaScript Tool"
     TOOLS_TARGET Qml # special case
     SOURCES
@@ -45,42 +46,42 @@ qt_add_tool(qmljs
 ## Scopes:
 #####################################################################
 
-qt_extend_target(qmljs CONDITION WIN32
+qt_extend_target(${target_name} CONDITION WIN32
     DEFINES
         NOMINMAX
 )
 
-qt_extend_target(qmljs CONDITION disassembler AND ((TEST_architecture_arch STREQUAL "i386") OR (TEST_architecture_arch STREQUAL "x86_64"))
+qt_extend_target(${target_name} CONDITION disassembler AND ((TEST_architecture_arch STREQUAL "i386") OR (TEST_architecture_arch STREQUAL "x86_64"))
     DEFINES
         WTF_USE_UDIS86=1
 )
 
-qt_extend_target(qmljs CONDITION (TEST_architecture_arch STREQUAL "arm") AND disassembler
+qt_extend_target(${target_name} CONDITION (TEST_architecture_arch STREQUAL "arm") AND disassembler
     DEFINES
         WTF_USE_ARMV7_DISASSEMBLER=1
 )
 
-qt_extend_target(qmljs CONDITION (TEST_architecture_arch STREQUAL "arm64") AND disassembler
+qt_extend_target(${target_name} CONDITION (TEST_architecture_arch STREQUAL "arm64") AND disassembler
     DEFINES
         WTF_USE_ARM64_DISASSEMBLER=1
 )
 
-qt_extend_target(qmljs CONDITION (TEST_architecture_arch STREQUAL "mips") AND disassembler
+qt_extend_target(${target_name} CONDITION (TEST_architecture_arch STREQUAL "mips") AND disassembler
     DEFINES
         WTF_USE_MIPS32_DISASSEMBLER=1
 )
 
-qt_extend_target(qmljs CONDITION NOT disassembler
+qt_extend_target(${target_name} CONDITION NOT disassembler
     DEFINES
         WTF_USE_UDIS86=0
 )
 
-qt_extend_target(qmljs CONDITION CMAKE_BUILD_TYPE STREQUAL Release
+qt_extend_target(${target_name} CONDITION CMAKE_BUILD_TYPE STREQUAL Release
     DEFINES
         NDEBUG
 )
 
-qt_extend_target(qmljs CONDITION GCC AND QT_COMPILER_VERSION_MAJOR STRGREATER 6 AND NOT CLANG AND NOT ICC
+qt_extend_target(${target_name} CONDITION GCC AND QT_COMPILER_VERSION_MAJOR STRGREATER 6 AND NOT CLANG AND NOT ICC
     COMPILE_OPTIONS
         -Wno-expansion-to-defined
 )
diff --git a/tools/qmllint/.prev_CMakeLists.txt b/tools/qmllint/.prev_CMakeLists.txt
index b0bc24d89d..2bb98260f6 100644
--- a/tools/qmllint/.prev_CMakeLists.txt
+++ b/tools/qmllint/.prev_CMakeLists.txt
@@ -4,7 +4,8 @@
 ## qmllint Tool:
 #####################################################################
 
-qt_add_tool(qmllint
+qt_get_tool_target_name(target_name qmllint)
+qt_add_tool(${target_name}
     TARGET_DESCRIPTION "QML Syntax Verifier"
     SOURCES
         ../shared/componentversion.cpp ../shared/componentversion.h
diff --git a/tools/qmllint/CMakeLists.txt b/tools/qmllint/CMakeLists.txt
index a42f700f45..03b7854682 100644
--- a/tools/qmllint/CMakeLists.txt
+++ b/tools/qmllint/CMakeLists.txt
@@ -4,7 +4,8 @@
 ## qmllint Tool:
 #####################################################################
 
-qt_add_tool(qmllint
+qt_get_tool_target_name(target_name qmllint)
+qt_add_tool(${target_name}
     TARGET_DESCRIPTION "QML Syntax Verifier"
     TOOLS_TARGET Qml # special case
     SOURCES
diff --git a/tools/qmlplugindump/.prev_CMakeLists.txt b/tools/qmlplugindump/.prev_CMakeLists.txt
index 078c20bf08..79a4b0b18d 100644
--- a/tools/qmlplugindump/.prev_CMakeLists.txt
+++ b/tools/qmlplugindump/.prev_CMakeLists.txt
@@ -4,7 +4,8 @@
 ## qmlplugindump Tool:
 #####################################################################
 
-qt_add_tool(qmlplugindump
+qt_get_tool_target_name(target_name qmlplugindump)
+qt_add_tool(${target_name}
     TARGET_DESCRIPTION "QML Plugin Metadata Dumper"
     SOURCES
         ../shared/qmlstreamwriter.cpp ../shared/qmlstreamwriter.h
@@ -27,12 +28,12 @@ qt_add_tool(qmlplugindump
 ## Scopes:
 #####################################################################
 
-qt_extend_target(qmlplugindump CONDITION TARGET Qt::Widgets
+qt_extend_target(${target_name} CONDITION TARGET Qt::Widgets
     PUBLIC_LIBRARIES
         Qt::Widgets
 )
 
-qt_extend_target(qmlplugindump CONDITION MACOS
+qt_extend_target(${target_name} CONDITION MACOS
     LINK_OPTIONS
         "-Wl,-sectcreate,__TEXT,__info_plist,$$shell_quote$$PWD/Info.plist"
 )
diff --git a/tools/qmlplugindump/CMakeLists.txt b/tools/qmlplugindump/CMakeLists.txt
index 63c0f398a4..cbeb03f38b 100644
--- a/tools/qmlplugindump/CMakeLists.txt
+++ b/tools/qmlplugindump/CMakeLists.txt
@@ -4,7 +4,8 @@
 ## qmlplugindump Tool:
 #####################################################################
 
-qt_add_tool(qmlplugindump
+qt_get_tool_target_name(target_name qmlplugindump)
+qt_add_tool(${target_name}
     TARGET_DESCRIPTION "QML Plugin Metadata Dumper"
     TOOLS_TARGET Qml # special case
     SOURCES
@@ -28,12 +29,12 @@ qt_add_tool(qmlplugindump
 ## Scopes:
 #####################################################################
 
-qt_extend_target(qmlplugindump CONDITION TARGET Qt::Widgets
+qt_extend_target(${target_name} CONDITION TARGET Qt::Widgets
     PUBLIC_LIBRARIES
         Qt::Widgets
 )
 
-qt_extend_target(qmlplugindump CONDITION MACOS
+qt_extend_target(${target_name} CONDITION MACOS
     LINK_OPTIONS
         "-Wl,-sectcreate,__TEXT,__info_plist,${CMAKE_CURRENT_SOURCE_DIR}/Info.plist" # special case
 )
diff --git a/tools/qmlpreview/.prev_CMakeLists.txt b/tools/qmlpreview/.prev_CMakeLists.txt
index a2ebba7f50..e8cfaa528a 100644
--- a/tools/qmlpreview/.prev_CMakeLists.txt
+++ b/tools/qmlpreview/.prev_CMakeLists.txt
@@ -4,7 +4,8 @@
 ## qmlpreview Tool:
 #####################################################################
 
-qt_add_tool(qmlpreview
+qt_get_tool_target_name(target_name qmlpreview)
+qt_add_tool(${target_name}
     TARGET_DESCRIPTION "QML Preview"
     SOURCES
         main.cpp
diff --git a/tools/qmlpreview/CMakeLists.txt b/tools/qmlpreview/CMakeLists.txt
index 1952e2513d..3df5a921cf 100644
--- a/tools/qmlpreview/CMakeLists.txt
+++ b/tools/qmlpreview/CMakeLists.txt
@@ -4,7 +4,8 @@
 ## qmlpreview Tool:
 #####################################################################
 
-qt_add_tool(qmlpreview
+qt_get_tool_target_name(target_name qmlpreview)
+qt_add_tool(${target_name}
     TARGET_DESCRIPTION "QML Preview"
     TOOLS_TARGET Qml # special case
     SOURCES
diff --git a/tools/qmlprofiler/.prev_CMakeLists.txt b/tools/qmlprofiler/.prev_CMakeLists.txt
index 7969714e8a..27121615bd 100644
--- a/tools/qmlprofiler/.prev_CMakeLists.txt
+++ b/tools/qmlprofiler/.prev_CMakeLists.txt
@@ -4,7 +4,8 @@
 ## qmlprofiler Tool:
 #####################################################################
 
-qt_add_tool(qmlprofiler
+qt_get_tool_target_name(target_name qmlprofiler)
+qt_add_tool(${target_name}
     TARGET_DESCRIPTION "QML Profiler"
     SOURCES
         commandlistener.cpp commandlistener.h
diff --git a/tools/qmlprofiler/CMakeLists.txt b/tools/qmlprofiler/CMakeLists.txt
index 79c1b732ee..77943aa397 100644
--- a/tools/qmlprofiler/CMakeLists.txt
+++ b/tools/qmlprofiler/CMakeLists.txt
@@ -4,7 +4,8 @@
 ## qmlprofiler Tool:
 #####################################################################
 
-qt_add_tool(qmlprofiler
+qt_get_tool_target_name(target_name qmlprofiler)
+qt_add_tool(${target_name}
     TARGET_DESCRIPTION "QML Profiler"
     TOOLS_TARGET Qml # special case
     SOURCES
diff --git a/tools/qmlscene/.prev_CMakeLists.txt b/tools/qmlscene/.prev_CMakeLists.txt
index 61edc7deff..c1f7a78dd3 100644
--- a/tools/qmlscene/.prev_CMakeLists.txt
+++ b/tools/qmlscene/.prev_CMakeLists.txt
@@ -4,7 +4,8 @@
 ## qmlscene Tool:
 #####################################################################
 
-qt_add_tool(qmlscene
+qt_get_tool_target_name(target_name qmlscene)
+qt_add_tool(${target_name}
     TARGET_DESCRIPTION "QML Scene Viewer"
     SOURCES
         main.cpp
@@ -25,12 +26,12 @@ qt_add_tool(qmlscene
 ## Scopes:
 #####################################################################
 
-qt_extend_target(qmlscene CONDITION TARGET Qt::Widgets
+qt_extend_target(${target_name} CONDITION TARGET Qt::Widgets
     PUBLIC_LIBRARIES
         Qt::Widgets
 )
 
-qt_extend_target(qmlscene CONDITION QT_FEATURE_qml_debug
+qt_extend_target(${target_name} CONDITION QT_FEATURE_qml_debug
     DEFINES
         QT_QML_DEBUG_NO_WARNING
 )
diff --git a/tools/qmlscene/CMakeLists.txt b/tools/qmlscene/CMakeLists.txt
index c5dda83fd8..7e385653c1 100644
--- a/tools/qmlscene/CMakeLists.txt
+++ b/tools/qmlscene/CMakeLists.txt
@@ -4,7 +4,8 @@
 ## qmlscene Tool:
 #####################################################################
 
-qt_add_tool(qmlscene
+qt_get_tool_target_name(target_name qmlscene)
+qt_add_tool(${target_name}
     TARGET_DESCRIPTION "QML Scene Viewer"
     TOOLS_TARGET Qml # special case
     SOURCES
@@ -26,12 +27,12 @@ qt_add_tool(qmlscene
 ## Scopes:
 #####################################################################
 
-qt_extend_target(qmlscene CONDITION TARGET Qt::Widgets
+qt_extend_target(${target_name} CONDITION TARGET Qt::Widgets
     PUBLIC_LIBRARIES
         Qt::Widgets
 )
 
-qt_extend_target(qmlscene CONDITION QT_FEATURE_qml_debug
+qt_extend_target(${target_name} CONDITION QT_FEATURE_qml_debug
     DEFINES
         QT_QML_DEBUG_NO_WARNING
 )
diff --git a/tools/qmltestrunner/.prev_CMakeLists.txt b/tools/qmltestrunner/.prev_CMakeLists.txt
index e27f88a2ea..4744ad5c80 100644
--- a/tools/qmltestrunner/.prev_CMakeLists.txt
+++ b/tools/qmltestrunner/.prev_CMakeLists.txt
@@ -4,7 +4,8 @@
 ## qmltestrunner Tool:
 #####################################################################
 
-qt_add_tool(qmltestrunner
+qt_get_tool_target_name(target_name qmltestrunner)
+qt_add_tool(${target_name}
     TARGET_DESCRIPTION "QML Test Runner"
     SOURCES
         main.cpp
diff --git a/tools/qmltestrunner/CMakeLists.txt b/tools/qmltestrunner/CMakeLists.txt
index f1df677621..370c1054a6 100644
--- a/tools/qmltestrunner/CMakeLists.txt
+++ b/tools/qmltestrunner/CMakeLists.txt
@@ -4,7 +4,8 @@
 ## qmltestrunner Tool:
 #####################################################################
 
-qt_add_tool(qmltestrunner
+qt_get_tool_target_name(target_name qmltestrunner)
+qt_add_tool(${target_name}
     TARGET_DESCRIPTION "QML Test Runner"
     TOOLS_TARGET Qml # special case
     SOURCES
diff --git a/tools/qmltime/CMakeLists.txt b/tools/qmltime/CMakeLists.txt
index 40161d1c1a..03425e9ecf 100644
--- a/tools/qmltime/CMakeLists.txt
+++ b/tools/qmltime/CMakeLists.txt
@@ -25,6 +25,7 @@ qt_add_executable(qmltime
 #####################################################################
 
 set_target_properties(qmltime PROPERTIES
+    QT_QML_MODULE_INSTALL_QMLTYPES TRUE
     QT_QML_MODULE_VERSION 1.0
     QT_QML_MODULE_URI QmlTime
 )
-- 
2.25.1


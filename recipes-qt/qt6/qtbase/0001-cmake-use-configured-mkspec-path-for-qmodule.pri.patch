From 3d8300313d0a7bb90524f117cb66bdb5de1eaeb0 Mon Sep 17 00:00:00 2001
From: Samuli Piippo <samuli.piippo@qt.io>
Date: Tue, 5 May 2020 13:50:39 +0300
Subject: [PATCH] cmake: use configured mkspec path for qmodule.pri

Change-Id: I92d4fb65e9ad583fc7c545e3a48e4f39ed505369
---
 cmake/QtBuild.cmake | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/cmake/QtBuild.cmake b/cmake/QtBuild.cmake
index 1937e1a2ff..025000c977 100644
--- a/cmake/QtBuild.cmake
+++ b/cmake/QtBuild.cmake
@@ -793,7 +793,7 @@ endfunction()
 
 # Creates mkspecs/qmodule.pri which contains private global features among other things.
 function(qt_generate_global_module_pri_file)
-    qt_path_join(qmodule_pri_target_path ${PROJECT_BINARY_DIR} mkspecs)
+    qt_path_join(qmodule_pri_target_path ${PROJECT_BINARY_DIR} ${INSTALL_MKSPECSDIR})
     qt_path_join(qmodule_pri_target_path "${qmodule_pri_target_path}" "qmodule.pri")
 
     get_target_property(enabled_features GlobalConfig INTERFACE_QT_ENABLED_PRIVATE_FEATURES)
@@ -828,7 +828,7 @@ CONFIG += ${private_config_joined}
         OUTPUT "${qmodule_pri_target_path}"
         CONTENT "${content}"
     )
-    qt_install(FILES "${qmodule_pri_target_path}" DESTINATION mkspecs)
+    qt_install(FILES "${qmodule_pri_target_path}" DESTINATION ${INSTALL_MKSPECSDIR})
 endfunction()
 
 function(qt_generate_qt_conf)

From 91c7e146889f87f3a6a7bf1ab21694b4578cd2db Mon Sep 17 00:00:00 2001
From: Laszlo Agocs <laszlo.agocs@qt.io>
Date: Fri, 28 Jan 2022 11:29:16 +0100
Subject: [PATCH] rhi: d3d11: Try uuidof instead of IID_* to help old MinGW

Fixes: QTBUG-100294
Pick-to: 6.3
Change-Id: Iee90355ecd48a753f9a7ec53e7f5758e3d12eddf
---
 src/gui/rhi/qrhid3d11.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/gui/rhi/qrhid3d11.cpp b/src/gui/rhi/qrhid3d11.cpp
index 54c8b4f477..973dfd2738 100644
--- a/src/gui/rhi/qrhid3d11.cpp
+++ b/src/gui/rhi/qrhid3d11.cpp
@@ -214,7 +214,7 @@ bool QRhiD3D11::create(QRhi::Flags flags)
         // sufficient to get non-blocking behavior, try using ALLOW_TEARING
         // when available.
         IDXGIFactory5 *factory5 = nullptr;
-        if (SUCCEEDED(dxgiFactory->QueryInterface(IID_IDXGIFactory5, reinterpret_cast<void **>(&factory5)))) {
+        if (SUCCEEDED(dxgiFactory->QueryInterface(__uuidof(IDXGIFactory5), reinterpret_cast<void **>(&factory5)))) {
             BOOL allowTearing = false;
             if (SUCCEEDED(factory5->CheckFeatureSupport(DXGI_FEATURE_PRESENT_ALLOW_TEARING, &allowTearing, sizeof(allowTearing))))
                 supportsAllowTearing = allowTearing;

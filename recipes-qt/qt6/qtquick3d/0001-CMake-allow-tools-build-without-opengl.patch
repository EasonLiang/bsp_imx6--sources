From d46cce72f353a92b6175dbb90a39ce9e599ed53d Mon Sep 17 00:00:00 2001
From: Samuli Piippo <samuli.piippo@qt.io>
Date: Fri, 28 Aug 2020 14:49:11 +0300
Subject: [PATCH] CMake: allow tools build without opengl

Change-Id: I76d750b5bd29103133578152241c11bc35b14552
---
 CMakeLists.txt                 | 5 -----
 tools/balsam/CMakeLists.txt    | 1 -
 tools/instancer/CMakeLists.txt | 1 -
 tools/meshdebug/CMakeLists.txt | 1 -
 4 files changed, 8 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 49ef7111..5b30ed57 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -34,11 +34,6 @@ if(NOT TARGET Qt::Quick)
 endif()
 
 # special case begin
-if(NOT TARGET Qt::OpenGL)
-    message(NOTICE "Skipping the build as the condition \"TARGET Qt::OpenGL\" is not met.")
-    return()
-endif()
-
 find_package(Qt6 ${PROJECT_VERSION} CONFIG REQUIRED COMPONENTS ShaderTools)
 # special case end
 
diff --git a/tools/balsam/CMakeLists.txt b/tools/balsam/CMakeLists.txt
index e387eb92..47c513fb 100644
--- a/tools/balsam/CMakeLists.txt
+++ b/tools/balsam/CMakeLists.txt
@@ -11,7 +11,6 @@ qt_internal_add_tool(${target_name}
         main.cpp
     PUBLIC_LIBRARIES
         Qt::Qml # special case
-        Qt::OpenGL # special case
         Qt::Gui
         Qt::Quick3DAssetImportPrivate
         Qt::Quick3DIblBakerPrivate
diff --git a/tools/instancer/CMakeLists.txt b/tools/instancer/CMakeLists.txt
index 997869e4..0dd6eed4 100644
--- a/tools/instancer/CMakeLists.txt
+++ b/tools/instancer/CMakeLists.txt
@@ -9,7 +9,6 @@ qt_internal_add_tool(${target_name}
         main.cpp
     PUBLIC_LIBRARIES
         Qt::Qml # special case
-        Qt::OpenGL # special case
         Qt::Gui
         Qt::Quick3DPrivate
 )
diff --git a/tools/meshdebug/CMakeLists.txt b/tools/meshdebug/CMakeLists.txt
index 812155ef..b497e9a4 100644
--- a/tools/meshdebug/CMakeLists.txt
+++ b/tools/meshdebug/CMakeLists.txt
@@ -11,7 +11,6 @@ qt_internal_add_tool(${target_name}
         main.cpp
     PUBLIC_LIBRARIES
         Qt::Qml # special case
-        Qt::OpenGL # special case
         Qt::Gui
         Qt::Quick3DAssetImportPrivate
 )
